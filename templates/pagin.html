<div class="pagination-wrap news__pagination-wrap">
    <nav class="pagination">
        {% if page_obj.has_previous %}
            <a class="pagination__btn pagination__btn--prev" href="?page={{ page_obj.previous_page_number }}{% autoescape off %}{{ additional_url_short }}{% endautoescape %}"><span
                    class="visuallyhidden">Назад</span></a>
        {% endif %}





        {% if page_obj.number|add:'-3' > 1 %}
            <a class="pagination__link pagination__link--ellipses"
               href="?page={{ page_obj.number|add:'-3' }}{% autoescape off %}{{ additional_url_short }}{% endautoescape %}">...</a>
        {% endif %}


        {% for i in page_obj.paginator.page_range %}
            {% if page_obj.number == i %}
                <a class="pagination__link pagination__link--active" href="?page={{ i }}{% autoescape off %}{{ additional_url_short }}{% endautoescape %}">{{ i }}</a>
            {% elif i > page_obj.number|add:'-3' and i < page_obj.number|add:'3' %}
                <a class="pagination__link" href="?page={{ i }}{% autoescape off %}{{ additional_url_short }}{% endautoescape %}">{{ i }}</a>
            {% endif %}
        {% endfor %}



        {% if page_obj.paginator.num_pages > page_obj.number|add:'3' %}
            <a class="pagination__link pagination__link--ellipses"
               href="?page={{ page_obj.number|add:'-3' }}{% autoescape off %}{{ additional_url_short }}{% endautoescape %}">...</a>
            <a class="pagination__link"
               href="?page={{ page_obj.paginator.num_pages }}{% autoescape off %}{{ additional_url_short }}{% endautoescape %}">{{ page_obj.paginator.num_pages }}</a>
        {% endif %}







        {% if page_obj.has_next %}
            <a class="pagination__btn pagination__btn--next" href="?page={{ page_obj.next_page_number }}{% autoescape off %}{{ additional_url_short }}{% endautoescape %}"><span
                    class="visuallyhidden">Вперед</span></a>
        {% endif %}
    </nav>
</div>